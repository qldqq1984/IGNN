IGNNE_data_tumorsize_5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==3)
results <- HR_analysis(IGNNE_data_tumorsize_5cm)
results
TACS_data_tumorsize_2to5cm <- subset( rbind(TACS_data_training, TACS_data_validation), size==2)
results <- HR_analysis(TACS_data_tumorsize_2to5cm)
results
Nomogram_data_tumorsize_2to5cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size==2)
results <- HR_analysis(Nomogram_data_tumorsize_2to5cm)
results
IGNN_data_tumorsize_2to5cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size==2)
results <- HR_analysis(IGNN_data_tumorsize_2to5cm)
results
IGNNE_data_tumorsize_2to5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==2)
results <- HR_analysis(IGNNE_data_tumorsize_2to5cm)
results
TACS_data_tumorsize_2cm <- subset( rbind(TACS_data_training, TACS_data_validation), size<=1)
results <- HR_analysis(TACS_data_tumorsize_2cm)
results
Nomogram_data_tumorsize_2cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size<=1)
results <- HR_analysis(Nomogram_data_tumorsize_2cm)
results
IGNN_data_tumorsize_2cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size<=1)
results <- HR_analysis(IGNN_data_tumorsize_2cm)
results
IGNNE_data_tumorsize_2cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size<=1)
results <- HR_analysis(IGNNE_data_tumorsize_2cm)
results
HR_analysis <- function(pbc_data){
DFS <- as.numeric(pbc_data$DFS);
STATUS <- as.numeric(pbc_data$STATUS);
model_score <- as.numeric(pbc_data$model_score);
model_risk <- as.numeric(pbc_data$model_risk);
fit <- surv_fit(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
COX_Survs <- coxph(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
x<- summary(COX_Survs)
wald.test <- x$waldtest["test"]
HR <- {}
HR$value <- round(x$coef[2], 2) # hazard ratio
HR$pvalue <- round(x$waldtest["pvalue"], 2) # p value
HR$ci_lower <- round(x$conf.int[,"lower .95"],2) # lower boundaries of 95% CI
HR$ci_upper <- round(x$conf.int[,"upper .95"],2) # upper boundaries of 95% CI
return (HR)
}
#HR panel drawing
HR_panel <- function(TACS_results, Nomogram_results, IGNN_results, IGNNE_results){
boxLabels = c("TACS", "Nomogram", "IGNN", "IGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
}
# Training (n=731)
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
TACS_results <- HR_analysis(TACS_data_training)
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
Nomogram_results <- HR_analysis(Nomogram_data_training)
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNN_results <- HR_analysis(IGNN_data_training)
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
IGNNE_results <- HR_analysis(IGNNE_data_training)
HR_panel(TACS_results, Nomogram_results, IGNN_results, IGNNE_results)
G
HR_panel <- function(TACS_results, Nomogram_results, IGNN_results, IGNNE_results){
boxLabels = c("TACS", "Nomogram", "IGNN", "IGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
return(panel)
}
# Training (n=731)
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
TACS_results <- HR_analysis(TACS_data_training)
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
Nomogram_results <- HR_analysis(Nomogram_data_training)
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNN_results <- HR_analysis(IGNN_data_training)
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
IGNNE_results <- HR_analysis(IGNNE_data_training)
HR_panel_training <- HR_panel(TACS_results, Nomogram_results, IGNN_results, IGNNE_results)
HR_panel_training
HR_analysis <- function(pbc_data){
DFS <- as.numeric(pbc_data$DFS);
STATUS <- as.numeric(pbc_data$STATUS);
model_score <- as.numeric(pbc_data$model_score);
model_risk <- as.numeric(pbc_data$model_risk);
fit <- surv_fit(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
COX_Survs <- coxph(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
x<- summary(COX_Survs)
wald.test <- x$waldtest["test"]
HR <- {}
HR$value <- round(x$coef[2], 2) # hazard ratio
HR$pvalue <- round(x$waldtest["pvalue"], 2) # p value
HR$ci_lower <- round(x$conf.int[,"lower .95"],2) # lower boundaries of 95% CI
HR$ci_upper <- round(x$conf.int[,"upper .95"],2) # upper boundaries of 95% CI
return (HR)
}
#HR panel drawing
HR_panel <- function(TACS_results, Nomogram_results, IGNN_results, IGNNE_results){
boxLabels = c("TACS", "Nomogram", "IGNN", "IGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
return(panel)
}
# Training (n=731)
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
TACS_results <- HR_analysis(TACS_data_training)
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
Nomogram_results <- HR_analysis(Nomogram_data_training)
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNN_results <- HR_analysis(IGNN_data_training)
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
IGNNE_results <- HR_analysis(IGNNE_data_training)
IGNNE_results
HR_panel_training <- HR_panel(TACS_results, Nomogram_results, IGNN_results, IGNNE_results)
HR_panel_training
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(7.15,  8.43, 9.59, 14.04),
boxCILow = c(5.35, 6.49, 7.25, 10.40),
boxCIHigh = c(9.57, 10.94, 12.67, 18.96))
(G <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
# annotate(geom = "text", y =0.415, x = 7.8, label = "7.09", size = 10, hjust = 0) +
# annotate(geom = "text", y =2.41, x = 9.2, label = "8.64", size = 10, hjust = 0) +
# annotate(geom = "text", y =1.41, x = 9.3, label = "8.43", size = 10, hjust = 0) +
# annotate(geom = "text", y =3.25, x = 12.0, label = "11.43", size = 10, hjust = 0) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
)
G
boxLabels = c("TACS", "TACS-Clinical", "TACSGNN", "TACSGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(7.15,  8.43, 9.59, 14.04),
boxCILow = c(5.35, 6.49, 7.25, 10.40),
boxCIHigh = c(9.57, 10.94, 12.67, 18.96))
(G <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
# annotate(geom = "text", y =0.415, x = 7.8, label = "7.09", size = 10, hjust = 0) +
# annotate(geom = "text", y =2.41, x = 9.2, label = "8.64", size = 10, hjust = 0) +
# annotate(geom = "text", y =1.41, x = 9.3, label = "8.43", size = 10, hjust = 0) +
# annotate(geom = "text", y =3.25, x = 12.0, label = "11.43", size = 10, hjust = 0) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
)
G
IGNN_results
TACS_results
TACS_results$value
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
boxLabels = c("TACS", "Nomogram", "IGNN", "IGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
panel
df
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(7.15,  8.43, 9.59, 14.04),
boxCILow = c(5.35, 6.49, 7.25, 10.40),
boxCIHigh = c(9.57, 10.94, 12.67, 18.96))
df
HR_panel <- function(TACS_results, Nomogram_results, IGNN_results, IGNNE_results){
# boxLabels = c("TACS", "Nomogram", "IGNN", "IGNNE")
boxLabels = c("TACS", "TACS-Clinical", "TACSGNN", "TACSGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
return(panel)
}
# Training (n=731)
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
TACS_results <- HR_analysis(TACS_data_training)
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
Nomogram_results <- HR_analysis(Nomogram_data_training)
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNN_results <- HR_analysis(IGNN_data_training)
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
IGNNE_results <- HR_analysis(IGNNE_data_training)
HR_panel_training <- HR_panel(TACS_results, Nomogram_results, IGNN_results, IGNNE_results)
HR_panel_training
library(risksetROC)
library(survival)
library(timeROC)
library(survminer)
library(openxlsx)
options(digits=4)
library(openxlsx)
dir_root = dirname(dirname(dirname(rstudioapi::getActiveDocumentContext()$path)))
Data_file = paste0(dir_root,"/Souce Data/Figure_2/Figure_2.xlsx")
windowsFonts(HEL=windowsFont("Helvetica CE 55 Roman"),
RMN=windowsFont("Times New Roman"),
ARL=windowsFont("Times New Roman"))
#HR measured with the low or high risk stratified by prognostic models in Kaplan-Meier survival analysis
HR_analysis <- function(pbc_data){
DFS <- as.numeric(pbc_data$DFS);
STATUS <- as.numeric(pbc_data$STATUS);
model_score <- as.numeric(pbc_data$model_score);
model_risk <- as.numeric(pbc_data$model_risk);
fit <- surv_fit(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
COX_Survs <- coxph(Surv(DFS, STATUS) ~ model_risk, data = pbc_data )
x<- summary(COX_Survs)
wald.test <- x$waldtest["test"]
HR <- {}
HR$value <- round(x$coef[2], 2) # hazard ratio
HR$pvalue <- round(x$waldtest["pvalue"], 2) # p value
HR$ci_lower <- round(x$conf.int[,"lower .95"],2) # lower boundaries of 95% CI
HR$ci_upper <- round(x$conf.int[,"upper .95"],2) # upper boundaries of 95% CI
return (HR)
}
#HR panel drawing
HR_panel <- function(TACS_results, Nomogram_results, IGNN_results, IGNNE_results){
boxLabels = c("model1_TACS", "model2_Nomogram", "model3_IGNN", "model4_IGNNE")
df <- data.frame(yAxis = length(boxLabels):1,
boxOdds = c(TACS_results$value,  Nomogram_results$value, IGNN_results$value, IGNNE_results$value),
boxCILow = c(TACS_results$ci_lower, Nomogram_results$ci_lower, IGNN_results$ci_lower, IGNNE_results$ci_lower),
boxCIHigh = c(TACS_results$ci_upper, Nomogram_results$ci_upper, IGNN_results$ci_upper, IGNNE_results$ci_upper))
panel <- ggplot(df, aes(x = boxOdds, y = boxLabels,color=boxLabels)) +
coord_flip()+
geom_vline(aes(xintercept = 1), size = 1.0, linetype = "dashed", color = "orange") +
geom_errorbarh(aes(xmax = boxCIHigh, xmin = boxCILow), size = 1.5, height = 0.2, color = "gray50") +
geom_point(size = 7.5) +
scale_color_manual(values=c("lightgreen","#E18727FF", "#0072B5FF", "#BC3C29FF")) +
scale_x_continuous(breaks = seq(1, 20, 3), labels = seq(1, 20, 3),limits = c(1,20)  ) +
theme_minimal()+
theme(legend.position="none",
legend.text = element_text(size=35),
legend.key= element_blank(),
axis.line = element_line(colour = "black", size=1.0),
axis.title.x = element_blank(),
axis.title.y = element_blank(),
axis.text.x = element_blank(),
axis.text.y = element_text(size=40),
plot.title = element_text(size =40))
return(panel)
}
# Training (n=731)
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
TACS_results <- HR_analysis(TACS_data_training)
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
Nomogram_results <- HR_analysis(Nomogram_data_training)
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNN_results <- HR_analysis(IGNN_data_training)
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
IGNNE_results <- HR_analysis(IGNNE_data_training)
HR_panel_training <- HR_panel(TACS_results, Nomogram_results, IGNN_results, IGNNE_results)
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
HR_panel_validation
HR_panel_tumorsize_5cm
IGNNE_results$ci_upper
round(IGNNE_results$ci_upper)
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
HR_panel_validation
HR_panel_tumorsize_5cm
HR_panel_2to5cm
HR_panel_2to5cm
HR_panel_tumorsize_5cm
HR_panel_2cm
IGNN_results
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
HR_panel_validation
HR_panel_tumorsize_5cm
HR_panel_2to5cm
HR_panel_2cm
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_2cm
HR_panel_training
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/4model_train_cohort_KM_analysis.R")
HR_panel_training
HR_panel_validation
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/HR_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_HR_panel.R")
HR_panel_training
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
length(TACS_data_training)
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
length(TACS_data_training)
rowsum(TACS_data_training)
TACS_data_training
TACS_data_training.rownum
size(TACS_data_training)
nrow(TACS_data_training)
len(TACS_data_training)
length(TACS_data_training)
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
TACS_results
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
TACS_Cindexs
TACS_group <- ifelse(TACS_Cindexs !="NA", "model1_TACS", "NA")
TACS_group
TACS_data_training <- read.xlsx( Data_file , sheet = "TACS_training_cohort")
Nomogram_data_training <- read.xlsx( Data_file , sheet = "Nomogram_training_cohort")
IGNN_data_training <- read.xlsx( Data_file , sheet = "IGNN_training_cohort")
IGNNE_data_training <- read.xlsx( Data_file , sheet = "IGNNE_training_cohort")
TACS_cindex <- Cindex_analysis(TACS_data_training)
TACS_group <- ifelse(TACS_cindex !="NA", "model1_TACS", "NA")
TACS_Cindexs <- data.frame(TACS_cindex,TACS_group)
names(TACS_Cindexs)[names(TACS_Cindexs) == 'TACS_cindex'] <- 'Cindex';
names(CTACS_Cindexs)[names(TACS_Cindexs) == 'TACS_group'] <- 'Models'
TACS_cindex <- Cindex_analysis(TACS_data_training)
TACS_group <- ifelse(TACS_cindex !="NA", "model1_TACS", "NA")
TACS_Cindexs <- data.frame(TACS_cindex,TACS_group)
names(TACS_Cindexs)[names(TACS_Cindexs) == 'TACS_cindex'] <- 'Cindex';
names(TACS_Cindexs)[names(TACS_Cindexs) == 'TACS_group'] <- 'Models'
TACS_Cindexs
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindexs
set.seed(12345)
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindexs
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindexs
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
TACS_Cindexs
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
IGNNE_Cindexs
IGNN_Cindexs
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindex_panel_training
Cindex_panel_training
Cindex_panel_training <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
Cindex_panel_training
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindex_panel_validation
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindex_panel_training
Cindex_panel_training
Cindex_panel_validation
Cindex_panel_training <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
Cindex_panel_training
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
Cindex_panel_training
Cindex_panel_validation
TACS_data_tumorsize_5cm <- subset( rbind(TACS_data_training, TACS_data_validation), size==3)
Nomogram_data_tumorsize_5cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size==3)
IGNN_data_tumorsize_5cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size==3)
IGNNE_data_tumorsize_5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==3)
TACS_Cindexs <- Cindex_analysis(TACS_data_5cm, "model1_TACS")
Nomogram_Cindexs <- Cindex_analysis(Nomogram_data_5cm, "model2_Nomogram")
IGNN_Cindexs <- Cindex_analysis(IGNN_data_5cm, "model3_IGNN")
IGNNE_Cindexs <- Cindex_analysis(IGNNE_data_5cm, "model4_IGNNE")
Cindex_panel_5cm <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
TACS_data_tumorsize_5cm <- subset( rbind(TACS_data_training, TACS_data_validation), size==3)
Nomogram_data_tumorsize_5cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size==3)
IGNN_data_tumorsize_5cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size==3)
IGNNE_data_tumorsize_5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==3)
TACS_data_tumorsize_5cm <- subset( rbind(TACS_data_training, TACS_data_validation), size==3)
Nomogram_data_tumorsize_5cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size==3)
IGNN_data_tumorsize_5cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size==3)
IGNNE_data_tumorsize_5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==3)
TACS_Cindexs <- Cindex_analysis(TACS_data_tumorsize_5cm, "model1_TACS")
Nomogram_Cindexs <- Cindex_analysis(Nomogram_data_tumorsize_5cm, "model2_Nomogram")
IGNN_Cindexs <- Cindex_analysis(IGNN_data_tumorsize_5cm, "model3_IGNN")
IGNNE_Cindexs <- Cindex_analysis(IGNNE_data_tumorsize_5cm, "model4_IGNNE")
Cindex_panel_tumorsize_5cm <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
Cindex_panel_tumorsize_5cm
TACS_data_tumorsize_2to5cm <- subset( rbind(TACS_data_training, TACS_data_validation), size==2)
Nomogram_data_tumorsize_2to5cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size==2)
IGNN_data_tumorsize_2to5cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size==2)
IGNNE_data_tumorsize_2to5cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size==2)
TACS_Cindexs <- Cindex_analysis(TACS_data_tumorsize_2to5cm, "model1_TACS")
Nomogram_Cindexs <- Cindex_analysis(Nomogram_data_tumorsize_2to5cm, "model2_Nomogram")
IGNN_Cindexs <- Cindex_analysis(IGNN_data_tumorsize_2to5cm, "model3_IGNN")
IGNNE_Cindexs <- Cindex_analysis(IGNNE_data_tumorsize_2to5cm, "model4_IGNNE")
Cindex_panel_tumorsize_2to5cm <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
Cindex_panel_tumorsize_2to5cm
TACS_data_tumorsize_2cm <- subset( rbind(TACS_data_training, TACS_data_validation), size<=1)
Nomogram_data_tumorsize_2cm <- subset( rbind(Nomogram_data_training, Nomogram_data_validation), size<=1)
IGNN_data_tumorsize_2cm <- subset( rbind(IGNN_data_training, IGNN_data_validation), size<=1)
IGNNE_data_tumorsize_2cm <- subset( rbind(IGNNE_data_training, IGNNE_data_validation), size<=1)
TACS_Cindexs <- Cindex_analysis(TACS_data_tumorsize_2cm, "model1_TACS")
Nomogram_Cindexs <- Cindex_analysis(Nomogram_data_tumorsize_2cm, "model2_Nomogram")
IGNN_Cindexs <- Cindex_analysis(IGNN_data_tumorsize_2cm, "model3_IGNN")
IGNNE_Cindexs <- Cindex_analysis(IGNNE_data_tumorsize_2cm, "model4_IGNNE")
Cindex_panel_tumorsize_2cm <- Cindex_panel(TACS_Cindexs, Nomogram_Cindexs, IGNN_Cindexs, IGNNE_Cindexs)
Cindex_panel_tumorsize_2cm
Cindex_panel_tumorsize_2to5cm
Cindex_panel_tumorsize_2cm
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
source("G:/博士论文5/NC_review1/IGNNandIGNNE_final_v1/experiments/data_analysis/Figure_2/Figure_2_ab_Cindex_panel.R")
